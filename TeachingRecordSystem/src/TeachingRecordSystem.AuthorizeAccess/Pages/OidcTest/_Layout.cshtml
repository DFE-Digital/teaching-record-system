@inject Joonasw.AspNetCore.SecurityHeaders.Csp.ICspNonceService NonceService
@{
    Layout = "_GovUkPageTemplate";
}

@section Head {
    <meta name="robots" content="noindex">
    <link rel="stylesheet" asp-href-include="~/Styles/*.css">
    @RenderSection("Styles", required: false)
}

@section Header {
    @{
        if (User.Identity?.IsAuthenticated is true)
        {
            ViewBag.SignOutLink = Url.Page("/OidcTest/SignOut");
            await Html.RenderPartialAsync("../Shared/_OneLoginServiceHeader");
        }
        else
        {
            <govuk-header />
        }
    }

    <govuk-service-navigation service-name="Test OIDC app" service-url="/oidc-test" />
}

@section BeforeContent {
    @RenderSection("BeforeContent", required: false)
}

@RenderBody()

@section Footer {
    <govuk-footer />
}

@section BodyEnd {
    @Html.GovUkFrontendScriptImports(cspNonce: NonceService.GetNonce())
    <script type="module" asp-add-nonce>
        import { initCrossServiceHeader } from '/lib/govuk-one-login-service-header/dist/scripts/service-header.js';
        initCrossServiceHeader();
    </script>
    @await RenderSectionAsync("Scripts", required: false)
}
